ChatReadonlyProperties:
  type: object
  properties:
    id:
      type: integer
      description: Идентификатор чата
      example: 1
  required:
    - id
ChatFillableProperties:
  type: object
  properties:
    user_id:
      type: integer
      description: Идентификатор пользователя
      example: 42
    user_type:
      description: Тип пользователя
      allOf:
        - type: integer
        - $ref: ../enums/communication_user_type_enum.yaml
    direction:
      description: Направление чата
      allOf:
        - type: integer
        - $ref: ../enums/communication_chat_direction_enum.yaml
    type_id:
      type: integer
      description: Тип чата
    theme:
      type: string
      description: Тема чата
      example: Поддержка
    muted:
      type: boolean
      description: Флаг чата без ответов
      example: false
    unread_user:
      type: boolean
      description: Флаг непрочтении юзером
      example: false
    unread_admin:
      type: boolean
      description: Флаг непрочтении админом
      example: true
ChatRequiredFillableProperties:
  type: object
  required:
    - user_id
    - theme
    - type_id
    - muted
    - user_type
  additionalProperties:
    type: string
ChatIncludes:
  type: object
  properties:
    messages:
      type: array
      items:
        $ref: ./messages.yaml#/Message
Chat:
  allOf:
    - $ref: "#/ChatReadonlyProperties"
    - $ref: "#/ChatFillableProperties"
    - $ref: "#/ChatRequiredFillableProperties"
    - $ref: "#/ChatIncludes"
CreateChatRequest:
  allOf:
    - $ref: "#/ChatFillableProperties"
    - $ref: "#/ChatRequiredFillableProperties"
PatchChatRequest:
  allOf:
    - $ref: "#/ChatFillableProperties"
SearchChatsFilter:
  type: object
  properties:
    theme_like:
      type: string
      description: Тема
    type_id:
      type: integer
      description: Id типа
    unread_admin:
      type: boolean
      description: Непрочитанное админом
SearchChatsRequest:
  type: object
  properties:
    sort:
      $ref: ../../common_schemas.yaml#/RequestBodySort
    filter:
      $ref: "#/SearchChatsFilter"
    include:
      type: array
      items:
        type: string
        description: Подгружаемые связанные сущности
        enum:
          - messages
      example:
        - messages
    pagination:
      $ref: ../../common_schemas.yaml#/RequestBodyPagination
ChatResponse:
  type: object
  properties:
    data:
      $ref: "#/Chat"
    meta:
      type: object
      additionalProperties:
        type: string
  required:
    - data
SearchChatsResponse:
  type: object
  properties:
    data:
      type: array
      items:
        $ref: "#/Chat"
    meta:
      type: object
      properties:
        pagination:
          $ref: ../../common_schemas.yaml#/ResponseBodyPagination
  required:
    - data
    - meta
