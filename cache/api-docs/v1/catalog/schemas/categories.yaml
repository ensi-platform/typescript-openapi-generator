CategoryReadonlyProperties:
  type: object
  properties:
    id:
      type: integer
      description: Идентификатор категории
      example: 202
    created_at:
      description: Дата создания
      format: date-time
      type: string
      example: 2021-07-03T11:57:28.000000Z
    updated_at:
      description: Дата обновления
      format: date-time
      type: string
      example: 2021-07-03T11:57:28.000000Z
    is_real_active:
      type: boolean
      description: Признак активности с учетом иерархии
      example: true
  required:
    - id
    - created_at
    - updated_at
    - is_real_active
CategoryFillableProperties:
  type: object
  properties:
    name:
      type: string
      description: Название категории
      example: Мясо
    code:
      type: string
      description: Код категории
      example: myaso
    parent_id:
      type: integer
      nullable: true
      description: Идентификатор родительской категории
      example: 125
    is_inherits_properties:
      type: boolean
      description: Категория наследует атрибуты родительской
      example: true
    is_active:
      type: boolean
      description: Признак активности данной категории
      example: false
CategoryRequiredFillableProperties:
  type: object
  required:
    - name
    - code
    - parent_id
    - is_inherits_properties
    - is_active
  additionalProperties:
    type: string
CategoryBoundProperty:
  type: object
  properties:
    name:
      type: string
      description: Название свойства
      example: Диагональ
    display_name:
      type: string
      description: Публичное наименование
      example: Диагональ экрана
    code:
      type: string
      description: Код свойства
      example: diagonal
    type:
      type: string
      description: Тип свойства из PropertyTypeEnum
      example: double
    hint_value:
      type: string
      description: Подсказка при заполнении для значения
      nullable: true
      example: Выберите цвет
    hint_value_name:
      type: string
      description: Подсказка при заполнении для названия значения
      nullable: true
      example: Введите название цвета
    is_multiple:
      type: boolean
      description: Поддерживает множественные значения
      example: true
    is_filterable:
      type: boolean
      description: Выводится в фильтрах на витрине
      example: false
    is_public:
      type: boolean
      description: Выводить на витрине
      example: false
    is_active:
      type: boolean
      description: Активность атрибут
      example: true
    has_directory:
      type: boolean
      description: Атрибут имеет справочник значений
      example: false
    is_inherited:
      type: boolean
      description: Наследуемой от родительской категории атрибут
      example: false
    is_required:
      type: boolean
      description: Атрибут обязателен для заполнения
      example: true
    is_system:
      type: boolean
      description: Признак системного атрибута
      example: false
    is_moderated:
      type: boolean
      description: Атрибут модерируется
      example: true
    is_gluing:
      type: boolean
      description: Свойство используется для склейки товаров
      example: true
    is_common:
      type: boolean
      description: Признак общего для всех категорий атрибута
      example: false
    property_id:
      type: integer
      description: Идентификатор атрибута, которому принадлежит значение
      example: 1
  required:
    - name
    - display_name
    - code
    - type
    - hint_value
    - hint_value_name
    - is_multiple
    - is_filterable
    - is_public
    - is_active
    - has_directory
    - is_inherited
    - is_required
    - is_system
    - is_moderated
    - is_gluing
    - is_common
    - property_id
CategoryIncludes:
  type: object
  properties:
    properties:
      type: array
      items:
        $ref: "#/CategoryBoundProperty"
    hidden_properties:
      type: array
      items:
        $ref: "#/CategoryBoundProperty"
Category:
  allOf:
    - $ref: "#/CategoryReadonlyProperties"
    - $ref: "#/CategoryFillableProperties"
    - $ref: "#/CategoryRequiredFillableProperties"
    - $ref: "#/CategoryIncludes"
CategoryNestable:
  allOf:
    - $ref: "#/CategoryReadonlyProperties"
    - $ref: "#/CategoryFillableProperties"
CreateCategoryRequest:
  allOf:
    - $ref: "#/CategoryFillableProperties"
    - $ref: "#/CategoryRequiredFillableProperties"
ReplaceCategoryRequest:
  allOf:
    - $ref: "#/CategoryFillableProperties"
    - $ref: "#/CategoryRequiredFillableProperties"
PatchCategoryRequest:
  allOf:
    - $ref: "#/CategoryFillableProperties"
SearchCategoriesFilter:
  type: object
  properties:
    id:
      type: integer
      description: Идентификатор(ы) категории
      example: 2
    name:
      type: string
      description: Название категории
      example: Автомобили
    name_like:
      type: string
      description: Название или часть названия категории
      example: авто
    code:
      type: string
      description: Код категории
      example: avtomobili
    code_like:
      type: string
      description: Код или часть кода категории
      example: avto
    parent_id:
      type: integer
      description: Идентификатор(ы) родительской категории
      example: 1024
    is_active:
      type: boolean
      description: Активность атрибут
      example: true
    is_root:
      type: boolean
      description: Отбирать только категории верхнего уровня или наоборот только вложенные
      example: true
    exclude_id:
      type: integer
      description: Идентификатор(ы) исключаемой категории
      example: 10
    has_is_gluing:
      type: boolean
      description: Есть ли в категории хотя бы одно свойство для склейки
      example: true
SearchCategoriesRequest:
  type: object
  properties:
    sort:
      $ref: ../../common_schemas.yaml#/RequestBodySort
    include:
      $ref: ../../common_schemas.yaml#/RequestBodyInclude
    pagination:
      $ref: ../../common_schemas.yaml#/RequestBodyPagination
    filter:
      $ref: "#/SearchCategoriesFilter"
BindCategoryPropertiesRequest:
  type: object
  properties:
    replace:
      type: boolean
      default: false
      description: Если true, все отсутствующие в запросе привязки будут удалены
      example: true
    properties:
      type: array
      items:
        type: object
        properties:
          id:
            type: integer
            description: Идентификатор атрибута товара
            example: 111
          is_required:
            type: boolean
            description: Является обязательным для заполнения внутри категории
            example: true
          is_gluing:
            type: boolean
            description: Свойство используется для склейки товаров
            example: true
        required:
          - id
          - is_required
          - is_gluing
CategoryResponse:
  type: object
  properties:
    data:
      $ref: "#/Category"
    meta:
      type: object
      additionalProperties:
        type: string
  required:
    - data
SearchCategoriesResponse:
  type: object
  properties:
    data:
      type: array
      items:
        $ref: "#/Category"
    meta:
      type: object
      properties:
        pagination:
          $ref: ../../common_schemas.yaml#/ResponseBodyPagination
  required:
    - data
    - meta
